<head>
		<title>SHelper</title>
		<meta name="viewport" content="user-scalable=no, width=device-width">
		<meta charset="UTF-8">

		<link href="css/bootstrap.min.css" rel="stylesheet" >
		<link href="css/style.css" rel="stylesheet" type="text/css">

		<script src="js/jquery.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
</head>

<body>
	Text: <textarea id="page_txt" rows="10"></textarea><br/>
	<button onclick="compute(1)">Inb Flights (left)</button><br/>
  	<button onclick="compute(2)">Inb Mail Dest</button><br/>
  	Ans: <textarea id="ans_txt"></textarea>
</body>

<script>
  function compute(type = 2) {
    var rgx;
    var result = "";
    var result2 = {};
    if (type == 1) {
	    rgx = new RegExp(/AA\s([\d]+)\n\d+\-[a-zA-Z]+\-\d+\s(\d+)\:(\d+)\:\d+\s\([^\)]+\)\n[^\n]+\n([A-Z]+)/, 'i');
    } else if (type == 2) {
	    rgx = new RegExp(/\n[A-Z]{3}([A-Z]{3})\n/, 'i');
    }
    var ans = $("#page_txt").val();
    while ((array1 = rgx.exec(ans)) !== null) {
	if (type == 1) {
		result = result + array1[1] + "\t" + array1[2] + ":" + array1[3] + array1[4];
	} else if (type == 2) {
		if (result2[array1[1]] === undefined) {
			result2[array1[1]] = 0;
		}
		result2[array1[1]]++;
	}
    }
    if (type == 2) {
	for (var prop in result2) {
	    result = result + prop + "/t" + result2['prop'] + "/n";
	}
    } else if (type == 1) {
	result = result.replace(/DFW/g, "");    
    }
    console.log(result);
  }
</script>
